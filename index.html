<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produtos - Vidal Design Solutions</title>
    
    <!-- Google Fonts: Montserrat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">

    <!-- Swiper.js para o Carrossel -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <!-- jsPDF para gerar PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        /* --- Declaração de Variáveis e Fontes --- */
        :root {
            --text-light: #f8f9fa;
            --text-dark: #212529;
            --price-yellow: #fcee09;
            --panel-bg: #2a2a2e;
            --success-green: #25D366;
            --danger-red: #dc3545;
            --gray-light: #f0f0f0;
            --gray-medium: #ccc;
            --gray-dark: #666;
        }

        /* --- Estilos Globais --- */
        html {
            scroll-behavior: smooth;
        }

        body {
            margin: 0; 
            min-height: 100vh; 
            background-image: url('http://googleusercontent.com/file_content/1'); 
            background-size: cover; 
            background-position: center; 
            background-repeat: no-repeat; 
            background-attachment: fixed; 
            font-family: 'Montserrat', sans-serif;
            color: var(--text-dark);
        }

        .container { 
            width: 90%; 
            max-width: 1200px; 
            margin: 0 auto; 
        }

        /* --- Animações --- */
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(-20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Cabeçalho --- */
        .main-header { 
            padding: 20px 0; 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            flex-wrap: wrap; 
            gap: 20px; 
        }
        
        .logo-box img {
            max-width: 250px; /* Ajustado para o novo logo */
            animation: fadeIn 1.5s ease-in-out;
        }

        .navigation-wrapper { 
            display: flex; 
            align-items: center; 
            flex-wrap: wrap; 
            gap: 20px; 
            animation: fadeIn 1.5s ease-in-out 0.3s backwards;
        }
        
        .main-nav { 
            display: flex; 
            align-items: center; 
            gap: 15px; 
        }

        .main-nav a { 
            color: var(--text-light); 
            text-decoration: none; 
            font-weight: 700; 
            font-size: 1rem; 
            transition: opacity 0.3s ease; 
            display: flex; 
            align-items: center; 
            gap: 8px;
        }
        .main-nav a:hover { opacity: 0.8; }
        .main-nav svg { height: 20px; width: 20px; fill: currentColor; }
        .nav-text { display: none; }

        .search-bar { 
            display: flex; 
            border: 1px solid var(--text-light); 
            border-radius: 4px; 
            overflow: hidden; 
        }
        .search-bar input { 
            background: transparent; 
            border: none; 
            padding: 8px 12px; 
            color: var(--text-light); 
            outline: none; 
            width: 150px; 
        }
        .search-bar input::placeholder { color: var(--gray-medium); }
        .search-bar button { 
            background: transparent; 
            border: none; 
            cursor: pointer; 
            padding: 0 12px; 
            display: flex; 
            align-items: center; 
        }
        .search-bar svg { height: 18px; width: 18px; fill: var(--text-light); }
        
        .cart-icon-wrapper { 
            position: relative; 
            cursor: pointer; 
            transition: transform 0.3s ease; 
        }
        .cart-icon-wrapper:hover { transform: scale(1.1); }
        .cart-icon-wrapper svg { height: 35px; width: 35px; fill: var(--text-light); }
        
        .cart-count { 
            position: absolute; 
            top: -8px; 
            right: -8px; 
            background-color: var(--price-yellow); 
            color: var(--text-dark); 
            border-radius: 50%; 
            width: 22px; 
            height: 22px; 
            font-size: 0.8rem; 
            font-weight: 700; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            border: 2px solid var(--text-dark); 
        }
        
        /* --- Barra de Categorias --- */
        .categories-bar {
            background-color: rgba(0, 0, 0, 0.7);
            padding: 10px 0;
            border-top: 1px solid #444;
            border-bottom: 1px solid #444;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }
        .categories-bar a { 
            transition: opacity 0.3s, transform 0.3s; 
            display: inline-block;
        }
        .categories-bar a:hover { opacity: 0.8; transform: scale(1.1); }
        .categories-bar img {
            height: 24px;
            vertical-align: middle;
        }

        /* --- Conteúdo Principal --- */
        main.container {
            padding-bottom: 150px;
        }

        .content-panel { 
            background-color: var(--panel-bg); 
            border-radius: 20px; 
            padding: 20px;
            margin-top: 40px; 
            margin-bottom: 40px; 
        }
        
        .section-title { 
            color: var(--text-light); 
            font-size: 2rem;
            text-align: center; 
            margin-bottom: 30px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
        }
        
        .category-title {
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
            color: var(--price-yellow);
            font-size: 1.8rem;
            margin-top: 40px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--price-yellow);
            padding-bottom: 10px;
        }
        
        /* --- Estilos do Carrossel (Swiper.js) --- */
        .swiper {
            width: 100%;
            padding-top: 20px;
            padding-bottom: 50px; /* Espaço para a paginação */
        }
        .swiper-slide {
            display: flex;
            justify-content: center;
            align-items: stretch; /* Garante que os cards tenham a mesma altura */
            height: auto; /* Permite que o card defina a altura */
        }
        .swiper-pagination-bullet-active {
            background-color: var(--price-yellow);
        }

        .product-card, .custom-product-card { 
            background-color: #fff; 
            color: var(--text-dark); 
            border-radius: 10px; 
            overflow: hidden; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.2); 
            display: flex; 
            flex-direction: column; 
            width: 100%; /* Ocupa todo o espaço do slide */
            max-width: 320px; /* Limita a largura máxima */
            margin: 0 auto;
        }
        
        .product-card img { 
            width: 100%; 
            height: 200px; 
            object-fit: cover; 
            display: block; 
        }
        
        .product-info { 
            padding: 20px; 
            flex-grow: 1; 
            display: flex; 
            flex-direction: column; 
        }
        
        .product-info h3, .custom-product-card h3 { 
            margin: 0 0 10px 0; 
            font-size: 1.2rem;
            font-family: 'Montserrat', sans-serif;
            font-weight: 900;
        }
        
        .product-info p { 
            margin: 0 0 20px 0; 
            font-size: 0.85rem; 
            color: var(--gray-dark); 
            flex-grow: 1; 
        }
        
        .product-price, .calculated-price { 
            font-size: 1.8rem; 
            font-weight: 900; 
            color: var(--text-dark); 
            min-height: 43px; 
        }
        
        .add-to-cart-btn { 
            background-color: var(--price-yellow); 
            color: var(--text-dark); 
            border: none; 
            padding: 12px; 
            font-weight: 700; 
            cursor: pointer; 
            transition: background-color 0.3s, transform 0.2s; 
            width: 100%; 
            margin-top: 15px; 
            border-radius: 5px; 
        }
        .add-to-cart-btn:hover { 
            background-color: #d4c908; 
            transform: scale(1.02);
        }

        /* --- Cards de Produto Personalizado --- */
        .custom-product-card { padding: 20px; }
        .custom-card-body { flex-grow: 1; }
        
        .custom-fields { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 15px; 
            margin-bottom: 15px; 
        }
        
        .custom-fields label, .color-selector label { 
            font-size: 0.9rem; 
            font-weight: 700; 
            margin-bottom: 5px; 
            display: block; 
        }
        
        .custom-fields input, .custom-select { 
            width: 100%; 
            padding: 10px; 
            border: 1px solid var(--gray-medium); 
            border-radius: 4px; 
            box-sizing: border-box; 
            font-size: 1rem;
        }
        
        .color-selector { margin-bottom: 15px; }
        .calculated-price { 
            text-align: center; 
            min-height: 30px; 
            visibility: hidden; 
            transition: visibility 0.2s;
        }
        .price-button-wrapper { margin-top: auto; padding-top: 15px; }
        
        .custom-select {
            appearance: none; -webkit-appearance: none; -moz-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.7rem center;
            background-size: 1.2em;
            padding-right: 2.5rem;
            background-color: #fff;
        }
        
        /* --- Modal --- */
        .modal-overlay { 
            position: fixed; 
            top: 0; left: 0; 
            width: 100%; height: 100%; 
            background-color: rgba(0,0,0,0.7); 
            display: none;
            justify-content: center; 
            align-items: center; 
            z-index: 1000; 
            padding: 15px;
            box-sizing: border-box;
        }
        
        .modal-content { 
            background-color: #fff; 
            color: var(--text-dark); 
            padding: 20px; 
            border-radius: 10px; 
            width: 100%; 
            max-width: 600px; 
            max-height: 90vh; 
            display: flex; 
            flex-direction: column; 
            box-shadow: 0 5px 25px rgba(0,0,0,0.4);
        }
        
        .modal-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            border-bottom: 1px solid var(--gray-medium); 
            padding-bottom: 15px; 
            margin-bottom: 15px; 
        }
        .modal-header h2 { margin: 0; font-size: 1.5rem; }
        .modal-close { font-size: 2rem; cursor: pointer; border: none; background: none; }
        
        .cart-items { overflow-y: auto; flex-grow: 1; }
        .cart-item { 
            display: flex; 
            align-items: center; 
            margin-bottom: 15px; 
            gap: 15px;
            flex-wrap: wrap;
        }
        .cart-item-info { flex-grow: 1; }
        .cart-item-info h4 { margin: 0 0 5px 0; }
        .cart-item-info p { margin: 0; font-size: 0.9rem; color: var(--gray-dark); }
        .cart-item-controls { display: flex; align-items: center; }
        
        .quantity-btn { 
            background: var(--gray-light); 
            border: 1px solid var(--gray-medium); 
            cursor: pointer; 
            width: 30px; height: 30px; 
            font-size: 1.2rem; 
        }
        .quantity-display { padding: 0 10px; font-weight: 700; }
        .remove-item-btn { 
            color: var(--danger-red); 
            background: none; 
            border: none; 
            cursor: pointer; 
            margin-left: 15px; 
            font-weight: 700; 
        }
        
        .cart-modal-footer { 
            border-top: 1px solid var(--gray-medium); 
            padding-top: 15px; 
            margin-top: 15px; 
            text-align: right; 
        }
        .cart-total { font-size: 1.5rem; font-weight: 700; margin-bottom: 20px; }
        
        .cart-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: flex-end;
        }
        .cart-actions button { 
            padding: 12px 20px; 
            border: none; 
            border-radius: 5px; 
            font-weight: 700; 
            cursor: pointer; 
        }
        .action-btn { background-color: #6c757d; color: white; }
        .whatsapp-btn { background-color: var(--success-green); color: white; }
        
        /* --- Formulário do Lead --- */
        #lead-form-container { display: none; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 700; }
        .form-group input { 
            width: 100%; 
            padding: 10px; 
            border: 1px solid var(--gray-medium); 
            border-radius: 5px; 
            box-sizing: border-box; 
        }
        .form-error { color: var(--danger-red); font-size: 0.9rem; margin-top: 5px; min-height: 1.2em; }
        
        /* --- Notificação --- */
        #notification { 
            position: fixed; 
            bottom: 20px; 
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--success-green); 
            color: white; 
            padding: 15px 25px; 
            border-radius: 5px; 
            z-index: 2000; 
            opacity: 0; 
            transition: opacity 0.5s, transform 0.5s; 
            transform: translate(-50%, 20px); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        #notification.show { 
            opacity: 1; 
            transform: translateX(-50%); 
        }

        /* --- Botões Flutuantes --- */
        .floating-buttons-container { 
            position: fixed; 
            bottom: 20px; 
            right: 20px; 
            z-index: 999; 
            display: flex; 
            flex-direction: column; 
            gap: 15px; 
        }
        .floating-btn { 
            background-color: var(--panel-bg); 
            color: var(--text-light); 
            border: 2px solid var(--price-yellow); 
            width: 55px; height: 55px; 
            border-radius: 50%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.3); 
            transition: transform 0.3s, opacity 0.3s, visibility 0.3s; 
        }
        .floating-btn:hover { transform: scale(1.1); }
        .floating-btn svg { fill: var(--price-yellow); }
        #floating-cart-btn { position: relative; }
        #back-to-top-btn { 
            opacity: 0; 
            visibility: hidden; 
            transform: translateY(10px); 
        }
        #back-to-top-btn.visible { 
            opacity: 1; 
            visibility: visible; 
            transform: translateY(0); 
        }

        /* --- Rodapé --- */
        .main-footer { 
            background-color: var(--panel-bg); 
            color: var(--text-light); 
            padding: 40px 0; 
            border-top: 4px solid var(--price-yellow); 
        }
        .footer-content { 
            display: flex; 
            justify-content: space-between; 
            align-items: flex-start; 
            flex-wrap: wrap; 
            gap: 30px; 
            text-align: center; 
        }
        .footer-info { flex: 1; min-width: 220px; }
        .footer-info h4 { 
            margin: 0 0 15px 0; 
            font-weight: 900; 
            color: var(--price-yellow); 
        }
        .footer-info p { margin: 0; font-size: 0.9rem; line-height: 1.6; }
        #address-link { cursor: pointer; transition: color 0.3s; }
        #address-link:hover { color: var(--price-yellow); }
        
        .social-icons a { 
            color: var(--text-light); 
            text-decoration: none; 
            margin: 0 10px; 
            transition: color 0.3s; 
        }
        .social-icons a:hover { color: var(--price-yellow); }
        .social-icons svg { width: 28px; height: 28px; }
        
        .footer-copyright { 
            width: 100%; 
            text-align: center; 
            margin-top: 40px; 
            padding-top: 20px; 
            border-top: 1px solid #444; 
            font-size: 0.8rem; 
            color: #aaa; 
        }
        
        /* --- Modal de Navegação (Waze/Maps) --- */
        #nav-modal .modal-content { max-width: 400px; }
        .nav-options { display: flex; flex-direction: column; gap: 15px; }
        .nav-options a { 
            background-color: var(--gray-light); 
            color: var(--text-dark); 
            text-decoration: none; 
            padding: 15px 20px; 
            border-radius: 8px; 
            font-weight: 700; 
            text-align: center; 
            transition: background-color 0.3s; 
        }
        .nav-options a:hover { background-color: #ddd; }


        /* --- Media Queries para Responsividade --- */
        
        @media (min-width: 768px) {
            .nav-text {
                display: inline;
            }
            .content-panel {
                padding: 40px;
            }
            .section-title {
                font-size: 2.5rem;
            }
            .category-title {
                font-size: 2rem;
            }
        }

        @media (max-width: 767px) {
            .main-header {
                flex-direction: column;
                gap: 25px;
            }
            .navigation-wrapper {
                justify-content: center;
            }
            .main-nav a {
                flex-direction: column;
                gap: 4px;
                font-size: 0.7rem;
            }
            .main-nav svg {
                height: 24px;
                width: 24px;
            }
            .nav-text {
                display: block;
            }
            .footer-content {
                text-align: center;
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    
    <header class="main-header container">
        <div class="logo-box">
            <a href="index.html"><img src="http://googleusercontent.com/file_content/2" alt="Vidal Design Logo"></a>
        </div>
        <div class="navigation-wrapper">
            <nav class="main-nav">
                <a href="index.html">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z" /></svg>
                    <span class="nav-text">Home</span>
                </a>
                <a href="produtos.html">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18,6H16V4H18M18,2H16V0H18M18,10H16V8H18M12,4H14V2H12M12,8H14V6H12M12,12H14V10H12M6,2H8V4H6M6,6H8V8H6M6,10H8V12H6M20,12V22H4V12H2V10L4,4C4,2.89 4.89,2 6,2H18C19.11,2 20,2.89 20,4L22,10V12H20M18,14H6V20H18V14Z" /></svg>
                    <span class="nav-text">Produtos</span>
                </a>
                <a href="destaques.html">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z" /></svg>
                    <span class="nav-text">Destaques</span>
                </a>
                <a href="contato.html">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,8L12,13L4,8V6L12,11L20,6M20,4H4C2.89,4 2,4.89 2,6V18C2,19.1 2.9,20 4,20H20C21.1,20 22,19.1 22,18V6C22,4.89 21.1,4 20,4Z" /></svg>
                    <span class="nav-text">Contato</span>
                </a>
            </nav>
            <div class="search-bar">
                <input type="text" placeholder="Buscar produto...">
                <button aria-label="Buscar">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z" /></svg>
                </button>
            </div>
            <div id="cart-icon" class="cart-icon-wrapper" aria-label="Abrir carrinho de compras">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17,18C15.89,18 15,18.89 15,20C15,21.1 15.89,22 17,22C18.11,22 19,21.1 19,20C19,18.89 18.11,18 17,18M1,2H4.27L5.21,4H20C20.55,4 21,4.45 21,5C21,5.17 20.95,5.34 20.88,5.5L17.3,11.97C16.96,12.58 16.3,13 15.55,13H8.1L7.2,14.63L7.17,14.75C7.17,14.89 7.28,15 7.42,15H19V17H7C5.89,17 5,16.1 5,15C5,14.65 5.09,14.32 5.24,14.04L6.6,11.59L3,4H1V2M7,18C5.89,18 5,18.89 5,20C5,21.1 5.89,22 7,22C8.11,22 9,21.1 9,20C9,18.89 8.11,18 7,18Z" /></svg>
                <span id="header-cart-count" class="cart-count">0</span>
            </div>
        </div>
    </header>

    <section class="categories-bar container">
        <a href="#cartao"><img src="https://placehold.co/100x40/000000/FFFFFF?text=Cartão" alt="Cartão"></a>
        <a href="#cartao"><img src="https://placehold.co/100x40/000000/FFFFFF?text=Panfleto" alt="Panfleto"></a>
        <a href="#banner"><img src="https://placehold.co/100x40/000000/FFFFFF?text=Banner" alt="Banner"></a>
        <a href="#banner"><img src="https://placehold.co/100x40/000000/FFFFFF?text=Fachada" alt="Fachada"></a>
        <a href="#toldo"><img src="https://placehold.co/100x40/000000/FFFFFF?text=Toldo" alt="Toldo"></a>
        <a href="#adesivo"><img src="https://placehold.co/100x40/000000/FFFFFF?text=Adesivo" alt="Adesivo"></a>
        <a href="#camisetas"><img src="https://placehold.co/100x40/000000/FFFFFF?text=Camisetas" alt="Camisetas"></a>
    </section>

    <main class="container">
        <section class="content-panel">
            <h2 class="section-title fade-in">Nossos Produtos</h2>

            <!-- Categoria: Impressos -->
            <div class="fade-in">
                <h3 class="category-title" id="cartao">Impressos</h3>
                <div class="swiper">
                    <div class="swiper-wrapper">
                        <!-- Card 1: Couché Fosco com Verniz -->
                        <div class="swiper-slide">
                            <div class="product-card" data-id="cv-fosco-verniz" data-name="Cartão de Visita - Couché Fosco 300g com Verniz">
                                <img src="https://placehold.co/600x400/e0e0e0/333?text=Cartão+com+Verniz" alt="Cartão de Visita com Verniz">
                                <div class="product-info">
                                    <h3>Couché Fosco 300g c/ Verniz</h3>
                                    <p>Laminação Fosca e Verniz Localizado (frente e verso).</p>
                                    <div class="color-selector">
                                        <label for="qnt-cv-fosco-verniz">Quantidade</label>
                                        <select id="qnt-cv-fosco-verniz" class="custom-select quantity-select">
                                            <option value="171.98">100 unidades</option>
                                            <option value="177.98">500 unidades</option>
                                            <option value="215.98">1.000 unidades</option>
                                        </select>
                                    </div>
                                    <div class="price-button-wrapper">
                                        <div class="product-price">R$ 171,98</div>
                                        <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Card 2: Couché 4x0 -->
                        <div class="swiper-slide">
                            <div class="product-card" data-id="cv-4x0" data-name="Cartão de Visita - Couché 300g (4x0)">
                                <img src="https://placehold.co/600x400/e0e0e0/333?text=Cartão+4x0" alt="Cartão de Visita 4x0">
                                <div class="product-info">
                                    <h3>Couché 300g (4x0)</h3>
                                    <p>Impressão colorida na frente, sem enobrecimento.</p>
                                    <div class="color-selector">
                                        <label for="qnt-cv-4x0">Quantidade</label>
                                        <select id="qnt-cv-4x0" class="custom-select quantity-select">
                                            <option value="75.98">100 unidades</option>
                                            <option value="155.98">1.000 unidades</option>
                                        </select>
                                    </div>
                                    <div class="price-button-wrapper">
                                        <div class="product-price">R$ 75,98</div>
                                        <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Card 3: Couché 4x4 -->
                        <div class="swiper-slide">
                            <div class="product-card" data-id="cv-4x4" data-name="Cartão de Visita - Couché 300g (4x4)">
                                <img src="https://placehold.co/600x400/e0e0e0/333?text=Cartão+4x4" alt="Cartão de Visita 4x4">
                                <div class="product-info">
                                    <h3>Couché 300g (4x4)</h3>
                                    <p>Impressão colorida na frente e no verso, sem enobrecimento.</p>
                                    <div class="color-selector">
                                        <label for="qnt-cv-4x4">Quantidade</label>
                                        <select id="qnt-cv-4x4" class="custom-select quantity-select">
                                            <option value="91.98">100 unidades</option>
                                            <option value="157.98">1.000 unidades</option>
                                        </select>
                                    </div>
                                    <div class="price-button-wrapper">
                                        <div class="product-price">R$ 91,98</div>
                                        <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>

            <!-- Categoria: Adesivos e Rótulos -->
            <div class="fade-in">
                <h3 class="category-title" id="adesivo">Adesivos e Rótulos</h3>
                <div class="swiper">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <div class="custom-product-card" data-id="adesivo-impresso" data-name="Adesivo Impresso" data-price-m2="100.00" data-type="area">
                                <h3>Adesivo Impresso</h3>
                                <div class="custom-card-body">
                                    <div class="custom-fields">
                                        <div><label for="adesivo-h">Altura (cm)</label><input id="adesivo-h" type="number" class="custom-height" min="1"></div>
                                        <div><label for="adesivo-w">Largura (cm)</label><input id="adesivo-w" type="number" class="custom-width" min="1"></div>
                                        <div><label for="adesivo-q">Quantidade</label><input id="adesivo-q" type="number" class="custom-quantity" value="1" min="1"></div>
                                    </div>
                                </div>
                                <div class="price-button-wrapper"><div class="calculated-price"></div><button class="add-to-cart-btn custom">Adicionar ao Carrinho</button></div>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>

            <!-- Categoria: Banners e Faixas -->
            <div class="fade-in">
                <h3 class="category-title" id="banner">Banners e Faixas</h3>
                <div class="swiper">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <div class="custom-product-card" data-id="banner-bastao" data-name="Banner com Bastão" data-price-m2="100.00" data-type="area">
                                <h3>Banner com Bastão</h3>
                                <div class="custom-card-body">
                                    <div class="custom-fields">
                                        <div><label for="banner-h">Altura (cm)</label><input id="banner-h" type="number" class="custom-height" min="1"></div>
                                        <div><label for="banner-w">Largura (cm)</label><input id="banner-w" type="number" class="custom-width" min="1"></div>
                                        <div><label for="banner-q">Quantidade</label><input id="banner-q" type="number" class="custom-quantity" value="1" min="1"></div>
                                    </div>
                                </div>
                                <div class="price-button-wrapper"><div class="calculated-price"></div><button class="add-to-cart-btn custom">Adicionar ao Carrinho</button></div>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>
            
            <!-- Categoria: Camisetas -->
            <div class="fade-in">
                <h3 class="category-title" id="camisetas">Camisetas</h3>
                <div class="swiper">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide">
                            <div class="product-card" data-id="camiseta-dry" data-name="Camiseta Dry Gola Redonda">
                                <img src="https://placehold.co/600x400/e0e0e0/333?text=Camiseta+Dry" alt="Camiseta Dry">
                                <div class="product-info">
                                    <h3>Camiseta Dry Gola Redonda</h3>
                                    <p>Impressão Ultra HD Sublimática na frente (4x0).</p>
                                    <div class="custom-fields">
                                        <div class="color-selector">
                                            <label for="size-camiseta">Tamanho</label>
                                            <select id="size-camiseta" class="custom-select size-select">
                                                <option>P</option>
                                                <option>M</option>
                                                <option>G</option>
                                                <option>GG</option>
                                            </select>
                                        </div>
                                         <div class="color-selector">
                                            <label for="qnt-camiseta">Quantidade</label>
                                            <select id="qnt-camiseta" class="custom-select quantity-select">
                                                <option value="69.98">1 unidade</option>
                                                <option value="347.98">5 unidades</option>
                                                <option value="693.98">10 unidades</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="price-button-wrapper">
                                        <div class="product-price">R$ 69,98</div>
                                        <button class="add-to-cart-btn">Adicionar ao Carrinho</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-pagination"></div>
                </div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="container footer-content">
            <div class="footer-info"><h4>Vidal Design Solutions</h4><p>Qualidade e Inovação em Comunicação Visual.</p></div>
            <div class="footer-info"><h4>Contato</h4><p>11 96864-9673</p><p>11 94914-1803</p></div>
            <div class="footer-info"><h4>Endereço</h4><div id="address-link"><p>Rua Antonio Cordeiro, 57 - São João</p><p>Mogi das Cruzes - SP</p></div></div>
            <div class="footer-info">
                <h4>Redes Sociais</h4>
                <div class="social-icons">
                    <a href="https://www.facebook.com/share/1BqrEs4rEr/" target="_blank" title="Facebook"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/></svg></a>
                    <a href="https://www.instagram.com/vidaldesignsolutions?igsh=MTYxbTgxazY5ZzI1OQ==" target="_blank" title="Instagram"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.9 3.9 0 0 0-1.417.923A3.9 3.9 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.9 3.9 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.9 3.9 0 0 0-.923-1.417A3.9 3.9 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599s.453.546.598.92c.11.282.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.5 2.5 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.5 2.5 0 0 1-.92-.598 2.5 2.5 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.231 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.843-.038 1.096-.047 3.232-.047zM8 4.868a3.132 3.132 0 1 0 0 6.264 3.132 3.132 0 0 0 0-6.264zm0 5.164a2.032 2.032 0 1 1 0-4.064 2.032 2.032 0 0 1 0 4.064zm4.908-5.343a1.162 1.162 0 1 0 0 2.324 1.162 1.162 0 0 0 0-2.324z"/></svg></a>
                    <a href="https://g.page/r/CXNPrWMbM0IZEBM/review" target="_blank" title="Google"><svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.19,4.73C14.03,4.73 15.6,5.33 16.85,6.46L19.09,4.22C17.21,2.56 14.8,1.5 12.19,1.5C7.03,1.5 3,5.5 3,12C3,18.5 7.03,22.5 12.19,22.5C17.6,22.5 21.5,18.33 21.5,12.33C21.5,11.76 21.45,11.43 21.35,11.1Z" /></svg></a>
                </div>
            </div>
            <div class="footer-copyright">&copy; 2024 Vidal Design Solutions. Todos os direitos reservados.</div>
        </div>
    </footer>

    <!-- Modal do Carrinho -->
    <div id="cart-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="cart-modal-title">Carrinho de Compras</h2>
                <button id="close-cart-modal-btn" class="modal-close">&times;</button>
            </div>
            <div id="cart-view">
                <div id="cart-items-container" class="cart-items"></div>
                <div class="cart-modal-footer">
                    <div id="cart-total" class="cart-total">Total: R$ 0,00</div>
                    <div class="cart-actions">
                        <button class="action-btn" data-action="pdf">Imprimir / Gerar PDF</button>
                        <button class="whatsapp-btn" data-action="whatsapp">Enviar Pedido via WhatsApp</button>
                    </div>
                </div>
            </div>
            <div id="lead-form-container">
                <div class="form-group">
                    <label for="customer-name">Seu Nome Completo</label>
                    <input type="text" id="customer-name" required>
                    <div class="form-error" id="name-error"></div>
                </div>
                <div class="form-group">
                    <label for="customer-contact">Seu Contato (WhatsApp ou E-mail)</label>
                    <input type="text" id="customer-contact" required>
                    <div class="form-error" id="contact-error"></div>
                </div>
                <div class="cart-modal-footer">
                    <button id="back-to-cart-btn" class="action-btn">Voltar</button>
                    <button id="finalize-order-btn" class="whatsapp-btn">Finalizar Pedido</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Navegação -->
    <div id="nav-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Abrir Rota</h2>
                <button id="close-nav-modal-btn" class="modal-close">&times;</button>
            </div>
            <div class="nav-options">
                <a href="https://www.google.com/maps/search/?api=1&query=Rua%20Antonio%20Cordeiro%2C%2057%2C%20Mogi%20das%20Cruzes%2C%20SP" target="_blank">Google Maps</a>
                <a href="https://waze.com/ul?q=Rua%20Antonio%20Cordeiro%2C%2057%2C%20Mogi%20das%20Cruzes%2C%20SP" target="_blank">Waze</a>
            </div>
        </div>
    </div>

    <!-- Botões Flutuantes -->
    <div class="floating-buttons-container">
        <button id="floating-cart-btn" class="floating-btn cart-icon-wrapper" aria-label="Abrir carrinho">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 16 16"><path d="M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l1.313 7h8.17l1.313-7H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/></svg>
            <span id="floating-cart-count" class="cart-count">0</span>
        </button>
        <button id="back-to-top-btn" class="floating-btn" aria-label="Voltar ao topo">
            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/></svg>
        </button>
    </div>

    <!-- Notificação -->
    <div id="notification"></div>

    <script>
    /**
     * Módulo da Loja Virtual
     * Gerencia o carrinho de compras, interações de UI e geração de pedidos.
     */
    const storeApp = {
        // --- ESTADO DA APLICAÇÃO ---
        cart: [],
        finalAction: '',

        // --- ELEMENTOS DO DOM ---
        elements: {},

        // --- INICIALIZAÇÃO ---
        init() {
            this.cacheDOMElements();
            this.registerEventListeners();
            this.initSwiper();
            this.initFadeInAnimation();
            this.updateCart();
        },

        cacheDOMElements() {
            this.elements = {
                cartIcon: document.getElementById('cart-icon'),
                cartModal: document.getElementById('cart-modal'),
                closeCartModalBtn: document.getElementById('close-cart-modal-btn'),
                cartItemsContainer: document.getElementById('cart-items-container'),
                cartTotalEl: document.getElementById('cart-total'),
                headerCartCountEl: document.getElementById('header-cart-count'),
                notificationEl: document.getElementById('notification'),
                cartView: document.getElementById('cart-view'),
                leadFormContainer: document.getElementById('lead-form-container'),
                finalizeOrderBtn: document.getElementById('finalize-order-btn'),
                backToCartBtn: document.getElementById('back-to-cart-btn'),
                customerNameInput: document.getElementById('customer-name'),
                customerContactInput: document.getElementById('customer-contact'),
                nameError: document.getElementById('name-error'),
                contactError: document.getElementById('contact-error'),
                floatingCartBtn: document.getElementById('floating-cart-btn'),
                floatingCartCountEl: document.getElementById('floating-cart-count'),
                backToTopBtn: document.getElementById('back-to-top-btn'),
                addressLink: document.getElementById('address-link'),
                navModal: document.getElementById('nav-modal'),
                closeNavModalBtn: document.getElementById('close-nav-modal-btn'),
                cartActions: document.querySelector('#cart-view .cart-actions'),
                modalTitle: document.getElementById('cart-modal-title'),
                productCards: document.querySelectorAll('.product-card'),
                customProductCards: document.querySelectorAll('.custom-product-card'),
                fadeElements: document.querySelectorAll('.fade-in'),
            };
        },

        registerEventListeners() {
            this.elements.cartIcon.addEventListener('click', () => this.openCartModal());
            this.elements.floatingCartBtn.addEventListener('click', () => this.openCartModal());
            this.elements.closeCartModalBtn.addEventListener('click', () => this.closeModal(this.elements.cartModal));
            this.elements.cartModal.addEventListener('click', (e) => {
                if (e.target === this.elements.cartModal) this.closeModal(this.elements.cartModal);
            });
            this.elements.addressLink.addEventListener('click', () => this.openModal(this.elements.navModal));
            this.elements.closeNavModalBtn.addEventListener('click', () => this.closeModal(this.elements.navModal));
            this.elements.navModal.addEventListener('click', (e) => {
                if (e.target === this.elements.navModal) this.closeModal(this.elements.navModal);
            });
            this.elements.cartItemsContainer.addEventListener('click', (e) => this.handleCartItemInteraction(e));
            this.elements.cartActions.addEventListener('click', (e) => this.handleCartAction(e));
            this.elements.backToCartBtn.addEventListener('click', () => this.showCartView());
            this.elements.finalizeOrderBtn.addEventListener('click', () => this.finalizeOrder());
            this.elements.productCards.forEach(card => this.setupStandardProduct(card));
            this.elements.customProductCards.forEach(card => this.setupCustomProduct(card));
            window.addEventListener('scroll', () => this.toggleBackToTopButton());
            this.elements.backToTopBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
        },

        initSwiper() {
            const swipers = document.querySelectorAll('.swiper');
            swipers.forEach(swiperEl => {
                new Swiper(swiperEl, {
                    slidesPerView: 1,
                    spaceBetween: 30,
                    pagination: {
                        el: swiperEl.querySelector('.swiper-pagination'),
                        clickable: true,
                    },
                    breakpoints: {
                        640: { slidesPerView: 2, spaceBetween: 20 },
                        1024: { slidesPerView: 3, spaceBetween: 30 },
                    }
                });
            });
        },
        
        initFadeInAnimation() {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });
            this.elements.fadeElements.forEach(el => observer.observe(el));
        },

        updateCart() {
            this.elements.cartItemsContainer.innerHTML = '';
            let total = 0;
            let totalItems = 0;
            if (this.cart.length === 0) {
                this.elements.cartItemsContainer.innerHTML = '<p>Seu carrinho está vazio.</p>';
                this.elements.cartActions.style.display = 'none';
            } else {
                this.elements.cartActions.style.display = 'flex';
                this.cart.forEach(item => {
                    const itemEl = this.createCartItemElement(item);
                    this.elements.cartItemsContainer.appendChild(itemEl);
                    total += item.price * item.quantity;
                    totalItems += item.quantity;
                });
            }
            this.elements.cartTotalEl.innerText = `Total: ${this.formatCurrency(total)}`;
            this.elements.headerCartCountEl.innerText = totalItems;
            this.elements.floatingCartCountEl.innerText = totalItems;
        },

        createCartItemElement(item) {
            const itemEl = document.createElement('div');
            itemEl.classList.add('cart-item');
            const quantityControls = item.isCustom
                ? `<span class="quantity-display">Qtd: ${item.quantity}</span>`
                : `<button class="quantity-btn" data-id="${item.id}" data-desc="${item.desc}" data-action="decrease">-</button>
                   <span class="quantity-display">${item.quantity}</span>
                   <button class="quantity-btn" data-id="${item.id}" data-desc="${item.desc}" data-action="increase">+</button>`;
            itemEl.innerHTML = `
                <div class="cart-item-info"><h4>${item.name}</h4><p>${item.desc}</p></div>
                <div class="cart-item-controls">${quantityControls}<button class="remove-item-btn" data-id="${item.id}" data-desc="${item.desc}">Remover</button></div>`;
            return itemEl;
        },

        addToCart(itemData) {
            const existingItem = this.cart.find(item => item.id === itemData.id && item.desc === itemData.desc);
            if (existingItem) {
                existingItem.quantity += itemData.quantity;
            } else {
                this.cart.push(itemData);
            }
            this.updateCart();
            this.showNotification('Item adicionado ao carrinho!');
        },
        
        handleCartItemInteraction(event) {
            const target = event.target;
            const id = target.dataset.id;
            const desc = target.dataset.desc;
            if (target.classList.contains('quantity-btn')) {
                const action = target.dataset.action;
                const itemIndex = this.cart.findIndex(i => i.id === id && i.desc === desc);
                if (itemIndex === -1) return;
                if (action === 'increase') {
                    this.cart[itemIndex].quantity++;
                } else if (action === 'decrease') {
                    this.cart[itemIndex].quantity--;
                    if (this.cart[itemIndex].quantity <= 0) this.cart.splice(itemIndex, 1);
                }
            } else if (target.classList.contains('remove-item-btn')) {
                this.cart = this.cart.filter(i => !(i.id === id && i.desc === desc));
            }
            this.updateCart();
        },

        setupStandardProduct(card) {
            const quantitySelect = card.querySelector('.quantity-select');
            const priceDisplay = card.querySelector('.product-price');
            const addToCartBtn = card.querySelector('.add-to-cart-btn');
            if (!quantitySelect || !priceDisplay || !addToCartBtn) return;
            quantitySelect.addEventListener('change', () => {
                priceDisplay.innerText = this.formatCurrency(parseFloat(quantitySelect.value));
            });
            addToCartBtn.addEventListener('click', () => {
                const selectedOption = quantitySelect.options[quantitySelect.selectedIndex];
                const sizeSelect = card.querySelector('.size-select');
                let desc = selectedOption.text;
                if (sizeSelect) desc += ` - Tamanho: ${sizeSelect.value}`;
                this.addToCart({
                    id: card.dataset.id,
                    name: card.dataset.name,
                    price: parseFloat(selectedOption.value),
                    desc: desc,
                    quantity: 1,
                    isCustom: false,
                });
            });
        },

        setupCustomProduct(card) {
            const inputs = card.querySelectorAll('input, select');
            inputs.forEach(input => input.addEventListener('input', () => this.calculateCustomPrice(card)));
            card.querySelector('.add-to-cart-btn.custom').addEventListener('click', () => {
                const { price, desc, quantity, isValid } = this.getCustomProductData(card);
                if (isValid) {
                    this.addToCart({
                        id: Date.now().toString(),
                        name: card.dataset.name,
                        price: price,
                        desc: desc,
                        quantity: quantity,
                        isCustom: true,
                    });
                } else {
                    this.showNotification('Por favor, preencha todos os campos.', 'error');
                }
            });
        },
        
        calculateCustomPrice(card) {
            const priceDisplay = card.querySelector('.calculated-price');
            const { price, isValid } = this.getCustomProductData(card);
            if (isValid) {
                priceDisplay.innerText = this.formatCurrency(price);
                priceDisplay.style.visibility = 'visible';
            } else {
                priceDisplay.style.visibility = 'hidden';
            }
        },

        getCustomProductData(card) {
            const type = card.dataset.type;
            let price = 0, desc = '', quantity = 1, isValid = false;
            if (type === 'area') {
                const height = parseFloat(card.querySelector('.custom-height')?.value) || 0;
                const width = parseFloat(card.querySelector('.custom-width')?.value) || 0;
                quantity = parseInt(card.querySelector('.custom-quantity')?.value) || 1;
                const pricePerM2 = parseFloat(card.dataset.priceM2);
                if (height > 0 && width > 0 && quantity > 0) {
                    const totalAreaM2 = ((height / 100) * (width / 100)) * quantity;
                    const chargeableAreaM2 = Math.max(totalAreaM2, 0.5);
                    price = (chargeableAreaM2 * pricePerM2) / quantity;
                    const color = card.querySelector('.custom-select')?.value;
                    desc = `Medidas: ${height}cm x ${width}cm${color ? ' | Cor: ' + color : ''}`;
                    isValid = true;
                }
            }
            return { price, desc, quantity, isValid };
        },

        handleCartAction(event) {
            if (event.target.tagName === 'BUTTON') {
                this.finalAction = event.target.dataset.action;
                this.showLeadForm();
            }
        },

        finalizeOrder() {
            const name = this.elements.customerNameInput.value.trim();
            const contact = this.elements.customerContactInput.value.trim();
            if (!this.validateLeadForm(name, contact)) return;
            if (this.finalAction === 'whatsapp') this.sendWhatsAppMessage(name, contact);
            else if (this.finalAction === 'pdf') this.generatePDF(name, contact);
            this.closeModal(this.elements.cartModal);
        },

        validateLeadForm(name, contact) {
            let isValid = true;
            this.elements.nameError.textContent = '';
            this.elements.contactError.textContent = '';
            if (!name) {
                this.elements.nameError.textContent = 'Por favor, preencha seu nome.';
                isValid = false;
            }
            if (!contact) {
                this.elements.contactError.textContent = 'Por favor, preencha seu contato.';
                isValid = false;
            }
            return isValid;
        },

        generateOrderSummary(customerName, customerContact) {
            let summary = `*DADOS DO CLIENTE:*\nNome: ${customerName}\nContato: ${customerContact}\n\n*PEDIDO:*\n\n`;
            let total = 0;
            this.cart.forEach(item => {
                const subtotal = item.price * item.quantity;
                summary += `*Produto:* ${item.name}\n*Detalhes:* ${item.desc}\n*Quantidade:* ${item.quantity}\n*Subtotal:* ${this.formatCurrency(subtotal)}\n\n`;
                total += subtotal;
            });
            summary += `*TOTAL DO PEDIDO: ${this.formatCurrency(total)}*`;
            return { summary, total };
        },

        sendWhatsAppMessage(name, contact) {
            const { summary } = this.generateOrderSummary(name, contact);
            const phoneNumber = '5511968649673';
            const encodedMessage = encodeURIComponent(summary);
            window.open(`https://api.whatsapp.com/send?phone=${phoneNumber}&text=${encodedMessage}`, '_blank');
        },

        generatePDF(name, contact) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const { summary } = this.generateOrderSummary(name, contact);
            doc.setFontSize(18);
            doc.text("Orçamento - Vidal Design Solutions", 105, 20, { align: 'center' });
            doc.setFontSize(12);
            doc.text(`Cliente: ${name}`, 15, 40);
            doc.text(`Contato: ${contact}`, 15, 47);
            const cleanSummary = summary.replace(/\*/g, '');
            const splitText = doc.splitTextToSize(cleanSummary, 180);
            doc.text(splitText, 15, 60);
            doc.save(`Pedido-${name.replace(/\s/g, '_')}.pdf`);
        },

        openModal(modal) { modal.style.display = 'flex'; },
        closeModal(modal) { modal.style.display = 'none'; },
        
        openCartModal() {
            this.showCartView();
            this.updateCart();
            this.openModal(this.elements.cartModal);
        },

        showCartView() {
            this.elements.leadFormContainer.style.display = 'none';
            this.elements.cartView.style.display = 'block';
            this.elements.modalTitle.innerText = 'Carrinho de Compras';
        },

        showLeadForm() {
            this.elements.cartView.style.display = 'none';
            this.elements.leadFormContainer.style.display = 'block';
            this.elements.modalTitle.innerText = 'Informações para o Pedido';
        },

        showNotification(message, type = 'success') {
            const el = this.elements.notificationEl;
            el.textContent = message;
            el.style.backgroundColor = type === 'success' ? 'var(--success-green)' : 'var(--danger-red)';
            el.classList.add('show');
            setTimeout(() => {
                el.classList.remove('show');
            }, 3000);
        },

        toggleBackToTopButton() {
            if (window.scrollY > 300) {
                this.elements.backToTopBtn.classList.add('visible');
            } else {
                this.elements.backToTopBtn.classList.remove('visible');
            }
        },

        formatCurrency(value) {
            return `R$ ${value.toFixed(2).replace('.', ',')}`;
        },
    };

    document.addEventListener('DOMContentLoaded', () => {
        storeApp.init();
    });
    </script>
</body>
</html>
